.search
  = form_tag('/learning_objective/search', :method => "get") do
    = label_tag(:q, "")
    = text_field_tag(:q, @q)
    = hidden_field_tag('disciplines', @disciplines)
    = hidden_field_tag('categories', @categories)
    = hidden_field_tag('show_pending', @show_pending)
    = submit_tag("Search")

.pad

- if @learning_objectives.empty?
  .list_summary
    .pad
- else
  .list_summary
    %p= "showing all #{@learning_objectives.count} results"

%nav.filter
  %ul.panel
    - @discipline_values.each do |discipline|
      %li
        - if (@disciplines & [discipline] == [discipline]) and (@disciplines.empty? == false)
          %span.include= search_url("#{discipline.downcase} [-]", @q, @disciplines - [discipline], @categories, @show_pending)
        - else
          %span.exclude= search_url("#{discipline.downcase} [+]", @q, @disciplines | [discipline], @categories, @show_pending)
  %ul.panel
    - @category_values.each do |category|
      %li
        - if (@categories & [category] == [category]) and (@categories.empty? == false)
          %span.include= search_url("#{category.downcase} [-]", @q, @disciplines, @categories - [category], @show_pending)
        - else
          %span.exclude= search_url("#{category.downcase} [+]", @q, @disciplines, @categories | [category], @show_pending)
  %ul.panel
    %li
      - if @disciplines.count == 0 and @categories.count == 0
        %span.exclude= search_url("clear filter", "", "", "", @show_pending)
      - else
        %span.include= search_url("clear filter", "", "", "", @show_pending)

    - if @show_pending == true
      %li
        %span= search_url("hide pending", @q, @disciplines, @categories, 'false')
    - else
      %li
        %span= search_url("show pending", @q, @disciplines, @categories, 'true')

    %li
      %span.include= link_to "propose learning objective", '/learning_objective/create', :method => :post

.flash
  - flash.each do |key, value|
    %p{:class => key}
      %span= value.html_safe

.learning_objective
  - if @learning_objectives.empty?
    .notice.panel
      %p No learning objectives found. 
  - @learning_objectives.each do |lo|
    #panel{:id => lo.id}
      =render :partial => 'learning_objective', :locals => {:lo => lo}